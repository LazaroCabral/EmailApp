<!DOCTYPE html>
<html>
<head th:replace="~{/fragments::default-head}">
   <title>test</title> 
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <nav th:replace="~{/fragments::navbar}"></nav>
    <!--<form class="form-goup mt-5 mb-4">
        <label>de:</label>
        <input/>
        <label>para:</label>
        <input/>
        <label>assunto:</label>
        <input/>
        <label>email:</label>
        <input/>
    </form>-->
        <form class="form mt-5" th:object="${ContasDTORequest}" th:action="@{/sendnow}" method="POST">
            <label for="emailsModel" class="col">Modelo de email</label>
            <select class="col-2" th:field="*{emailsModel}">
                <option th:each="emailModel : *{emailsModel}" th:value="${emailModel}" th:text="${emailModel}"></option>
            </select>
            <label for="subject" class="col">Assunto :</label>
            <input type="text" class="col" th:field="*{subject}"/>
            <div th:if="${sendEmailFails}!=null and ${sendEmailFails}!=0" class="alert alert-danger mt-2" th:text="${sendEmailFails}+' email(s) nÃ£o enviados de '+${totalSelectedAccounts}"></div>
            <div th:if="${sendEmailFails}!=null and ${sendEmailFails}==0" class="alert alert-success" >todos os emails foram enviados com sucesso!!</div>
            <table class="table table-dark table-striped table-b">
                <tbody>
                    <tr>
                        <th></th>
                        <th>nome</th>
                        <th>cpf</th>
                        <th>email</th>
                    </tr>
                    <tr th:if="*{contas}!=null" th:each="conta : *{contas}">
                        <td><input th:field="*{contas}" th:value="${conta.cpf}" type="checkbox"/></td>
                        <td th:text="${conta.name}"></td> 
                        <td th:text="${conta.cpf}"></td> 
                        <td th:text="${conta.email}"></td>
                    </tr>
                </tbody>
            </table>
            <button type="submit">enviar</button>     
        </form>
    
</body>
</html>